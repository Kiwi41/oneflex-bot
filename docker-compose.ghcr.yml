version: '3.8'

services:
  oneflex-bot:
    # Utiliser l'image depuis GitHub Container Registry
    image: ghcr.io/kiwi41/oneflex-bot:latest
    # Ou builder localement :
    # build: .
    
    container_name: oneflex-bot
    restart: unless-stopped
    
    volumes:
      # Monter le fichier .env depuis le NAS
      - ./config/.env:/app/config/.env:ro
      # Optionnel : logs
      - ./logs:/app/logs
    
    environment:
      - TZ=Europe/Paris
      # Décommenter pour tester le container sans credentials
      # - SKIP_VALIDATION=true
    
    # Mode schedule : le bot tourne en continu et réserve automatiquement chaque jour
    # Commenter cette ligne si vous ne souhaitez pas démarrer le bot automatiquement
    command: python main.py --schedule

