version: '3.8'

services:
  oneflex-bot:
    build: .
    container_name: oneflex-bot
    # restart: unless-stopped
    volumes:
      # Monter le répertoire config (pour .env)
      - ./config:/app/config:rw
      # Optionnel : logs
      - ./logs:/app/logs
    environment:
      - TZ=Europe/Paris
      # Décommenter pour tester le container sans credentials
      - SKIP_VALIDATION=true
    
    # Mode par défaut : réservation récurrente pour les 5 prochaines semaines puis arrêt
    # Pour exécution quotidienne automatique à RESERVATION_TIME (3h05), utilisez --schedule
    # Alternatives : --schedule (bot continu) ou --date YYYY-MM-DD (réservation unique)
    # Commenter cette ligne si vous ne souhaitez pas démarrer le bot automatiquement
    command: python main.py --schedule
